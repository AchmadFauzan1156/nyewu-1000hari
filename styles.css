:root{
  --bg:#0b0c0f; --card:#11141a; --text:#e7e9ee; --muted:#9aa3ad;
  --pri:#6aa0ff; --pri2:#8a6aff; --ok:#2ecc71; --warn:#ffb020; --bad:#ff5c5c;
  --b:1px solid #2a3140; --r:16px; --shadow:0 10px 28px rgba(0,0,0,.30);
  --pad:clamp(12px,1.8vw,18px); --w:min(1100px,92vw);
}
@media (prefers-color-scheme: light){
  :root{ --bg:#f7f8fb; --card:#ffffff; --text:#0b0c0f; --muted:#5d6470; --b:1px solid #e6e8ee; }
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg); color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
header{
  background:
    radial-gradient(1200px 400px at 10% -10%, rgba(106,160,255,.35), transparent 60%),
    radial-gradient(1000px 380px at 110% -20%, rgba(138,106,255,.30), transparent 60%),
    linear-gradient(180deg, #0c0f15, #0b0c0f);
  padding:28px 0 20px; border-bottom:var(--b);
  position:sticky; top:0; z-index:1;
}
.wrap{width:var(--w); margin:0 auto; padding:0 var(--pad);}
h1{margin:0 0 8px; font-size:clamp(24px,4vw,36px); letter-spacing:.2px}
.sub{color:var(--muted)}
.card{
  background:var(--card); border:var(--b); border-radius:var(--r); box-shadow:var(--shadow);
  padding:var(--pad); margin-top:16px;
}
.grid{display:grid; gap:12px}
.grid-2{grid-template-columns:1fr}
@media(min-width:720px){ .grid-2{grid-template-columns:1fr 1fr} }

label{display:block; font-weight:600; margin-bottom:6px}
input, select, button{
  width:100%; padding:12px 12px; border:var(--b); border-radius:12px; background:transparent; color:var(--text); outline:none;
  transition: box-shadow .2s ease, transform .08s ease;
}
input::placeholder{color:var(--muted)}

.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 14px;
  border-radius:12px; text-decoration:none; cursor:pointer;

  /* ⇣ urutkan vendor prefix dulu, baru standard */
  -webkit-user-select: none;   /* Safari/iOS */
  -moz-user-select: none;      /* Firefox lama (aman ditambah) */
  -ms-user-select: none;       /* IE/Edge lama */
  user-select: none;           /* standard */

  -webkit-tap-highlight-color: transparent;

  background:linear-gradient(135deg,var(--pri),var(--pri2));
  border:none; color:white; font-weight:700;
  box-shadow:0 6px 16px rgba(106,160,255,.25);
}

.btn:hover{ transform: translateY(-1px); box-shadow:0 9px 20px rgba(106,160,255,.30); }
.btn:active{ transform: translateY(0); }
.ghost{background:transparent; border:var(--b); color:var(--text); box-shadow:none}
.ghost:hover{ box-shadow:0 6px 16px rgba(0,0,0,.14); }
.small{padding:8px 10px; border-radius:10px; font-size:13px}

.row{display:flex; gap:10px; flex-wrap:wrap}
.kpi-wrap{align-items:center}
.kpi{display:flex; align-items:center; gap:10px; padding:10px 12px; border:var(--b); border-radius:12px}
.kpi b{font-size:1.05rem}
.countdown{font-weight:700}
.ok{color:var(--ok)} .warn{color:var(--warn)} .bad{color:var(--bad)}

table{width:100%; border-collapse:collapse; margin-top:6px}
th, td{border-top:var(--b); padding:10px 8px; vertical-align:top}
thead th{position:sticky; top:0; background:var(--card)}
tbody tr:hover{background-color:rgba(138,106,255,.06)}
tbody tr:nth-child(even){background-color:rgba(255,255,255,0.02)} /* zebra halus di tema gelap */

.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
.pill{display:inline-block; padding:2px 8px; border-radius:999px; border:var(--b); color:var(--muted); font-size:12px}
footer{color:var(--muted); padding:18px 0 40px}
.tiny{font-size:12px; color:var(--muted)}
.cell-date{display:flex; flex-direction:column; gap:3px}
.cell-date .subtext{color:var(--muted); font-size:12px}
.actions{display:flex; gap:8px; flex-wrap:wrap}
.copy{display:inline-flex; gap:8px; align-items:center; min-width:260px}
.share{width:100%; font-size:13px}

/* details/summary untuk deskripsi */
.sum{cursor:pointer; font-weight:600}
.desc{margin:.4rem 0 0; color:var(--muted)}
details[open] .sum{color:var(--pri)}

/* utilities & responsive */
.mt-10{margin-top:10px} .mt-12{margin-top:12px} .mb-8{margin-bottom:8px}
.between{justify-content:space-between} .items-center{align-items:center}
.sr-only{position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;}
.w-170{width:170px} .w-120{width:120px} .w-160{width:160px}

/* efek reveal & highlight */
.reveal{opacity:0; transform: translateY(6px);}
.reveal.show{opacity:1; transform:none; transition:opacity .35s ease, transform .35s ease;}
.highlight{position:relative}
.highlight::after{
  content:""; position:absolute; inset:0; border-radius:12px;
  box-shadow: 0 0 0 2px rgba(138,106,255,.45) inset;
  animation: pulse 1.8s ease-in-out infinite;
  pointer-events:none;
}
@keyframes pulse{
  0%{ box-shadow: 0 0 0 2px rgba(138,106,255,.45) inset; }
  50%{ box-shadow: 0 0 0 4px rgba(138,106,255,.25) inset; }
  100%{ box-shadow: 0 0 0 2px rgba(138,106,255,.45) inset; }
}

/* fokus ring yang jelas */
:focus-visible{ outline:3px solid rgba(138,106,255,.7); outline-offset:2px; border-radius:12px }
/* fallback untuk browser tanpa :focus-visible (Safari/Chrome lama) */
:focus{ outline:3px solid rgba(138,106,255,.7); outline-offset:2px; border-radius:12px }
:focus:not(:focus-visible){ outline:none }

/* hormati preferensi reduce motion */
@media (prefers-reduced-motion: reduce){
  .btn, .reveal.show{ transition:none !important }
  .reveal{ opacity:1; transform:none }
  .highlight::after{ animation:none }
}

/* cetak rapi */
@media print{
  :root{ --bg:#ffffff; --card:#ffffff; --text:#000000; --b:1px solid #c9cdd5; }
  body{ background:#fff; color:#000 }
  header{ background:#fff; border-bottom:1px solid #c9cdd5; position:static }
  .card{ box-shadow:none }
  .btn, .ghost, .kpi-wrap, .copy{ display:none !important } /* sembunyikan kontrol interaktif */
  table{ font-size:12px }
  thead th{ position:static }
}

/* scroller agar tabel tidak “mepet” di layar kecil */
.table-scroller{
  overflow-x: auto;
  overflow-y: hidden;        /* cegah munculnya scroll vertikal kecil */
}
.table-scroller table{ min-width: 980px; } /* ruang cukup untuk 5 kolom */

/* kunci lebar kolom agar presisi */
table{ table-layout: fixed; } /* penting: kolom tidak berubah-ubah */
.col-milestone{ width: 18%; }
.col-incl, .col-eksl{ width: 28%; }  /* dua kolom tanggal */
.col-desc{ width: 18%; }
.col-act{ width: 8%; }

/* jaga agar isi tidak “tumpah” */
td, th{ overflow: hidden; text-overflow: ellipsis; }
details{ max-width: 100%; }  /* ringkasan deskripsi tidak melebar keterlaluan */
.actions{ justify-content: flex-start; }

.actions{ flex-wrap: nowrap; gap:6px; }
.actions .btn.small{ white-space: nowrap; }

/* menu Add to Calendar (berbasis <details>) */
.menu{ position:relative }
.menu > summary{ list-style:none }
.menu > summary::-webkit-details-marker{ display:none }
.menu[open] > .menu-list{ opacity:1; transform:translateY(0); pointer-events:auto }
.menu-list{
  position:absolute; right:0; top:calc(100% + 6px);
  background:var(--card); border:var(--b); border-radius:12px; padding:6px; min-width:240px;
  box-shadow:var(--shadow);
  opacity:0; transform:translateY(-4px); transition:opacity .2s ease, transform .2s ease;
  pointer-events:none; z-index:5;
}
.menu-list a{ display:block; padding:8px 10px; border-radius:8px; text-decoration:none; color:var(--text) }
.menu-list a:hover{ background:rgba(138,106,255,.08) }
.menu-list hr{ border:0; border-top:var(--b); margin:6px 0 }

/* ===== Kontras tinggi utk select "Metode Hitung" & "Zona Waktu" ===== */
#mode,
#tz{
  background-color: #ffffff; /* dropdown putih */
  color: #000000;            /* teks hitam biar kebaca */
}

/* item di dalam daftar dropdown (sebagian browser pakai ini) */
#mode option,
#tz option{
  background-color: #ffffff;
  color: #000000;
}

/* ring fokus tetap jelas */
#mode:focus,
#tz:focus{
  outline: 3px solid rgba(138,106,255,.7);
  outline-offset: 2px;
}

/* default pakai putih/hitam */
#mode, #tz{ background:#fff; color:#000; }
/* saat preferensi sistem gelap, ikut gelap */
@media (prefers-color-scheme: dark){
  #mode, #tz{
    background:#1b1f29;
    color: var(--text);
    border-color:#2a3140;
  }
}
